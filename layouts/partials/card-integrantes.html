{{ $page := .Page.Resources }}
{{ $integrantes := .Site.Data.equipe.integrantes }}

{{ $integrantes = sort $integrantes "nome" }}

{{ $images := slice }}

{{ range $integrantes }}
  {{ if or (strings.HasPrefix .imagem "http:") (strings.HasPrefix .imagem "https:") }}
      {{ $images = $images | append ($images resources.GetRemote .imagem) }}
  {{ else if ($found := $page.Match .imagem) }}
      {{ $images = $images | append $found }}
  {{ else }}
      {{ $images = $images | append (resources.Get .imagem) }}
  {{ end }}
{{ end }}


<div class="grid-cols-2 grid md:grid-cols-3">
  {{ range $index, $integrante := $integrantes }}
  <div
    class="
    mx-3 mt-6 flex flex-col rounded-lg bg-white text-surface shadow-secondary-1 shadow-2xl 
    dark:bg-surface-dark dark:text-white 
    sm:shrink-0 sm:grow sm:basis-0">

    <img
        class="w-32 rounded-full mx-auto mt-4 not-prose"
        src="{{ (index $images $index).RelPermalink }}"
        alt="Foto {{ $integrante.nome }}" />

    <div class="p-4">
      <h5 class="text-xl font-medium leading-tight text-center">{{ $integrante.nome }}</h5>
    </div>
  </div>
  {{ end }}
</div>