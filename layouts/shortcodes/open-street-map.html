<!-- Open Street Map Static Map Shortcode -->
<!-- https://discourse.gohugo.io/t/embedding-google-maps-in-a-privacy-friendly-way/41575/4 -->
{{ $id := delimit (slice "map" (partial "functions/uid.html" .)) "-" }}
{{- $img := .Get "mapImg" -}}

{{ if or (strings.HasPrefix $img "http:") (strings.HasPrefix $img "https:") }}
  {{ $img = resources.GetRemote $img }}
{{ else if ($found := .Page.Resources.Get $img) }}
    {{ $img = $found }}
{{ else }}
  {{ $img = resources.Get $img }}
{{ end }}

<div class="container" id="map-container-{{ $id }}" style="cursor: pointer;">
    <figure>
        <img class="img-fluid" loading="lazy" id="static-map-{{ $id }}" src="{{ $img.RelPermalink }}" alt="{{ .Get "alt" }}" title="{{ .Get "title" }} Clique para ver o mapa interativo" width="1280" height="450">
        <figcaption>Clique para ver o mapa interativo<a href="https://www.openstreetmap.org/copyright" rel="noreferrer noopener" target="_blank"><small><span class="float-end">Â©OpenStreetMap</span></small></a>                    
        </figcaption>
    </figure>
</div>
<script>
document.getElementById('static-map-{{ $id }}').addEventListener('click', function() {
var container = document.getElementById('map-container-{{ $id }}');
var iframeCode = '<div class="container"><iframe src="{{ .Get "iframeSrc" }}" width="100%" height="450" frameborder="0" style="border:0" title="{{ .Get "title" }}" style="border: 1px solid black"></iframe>';

// Replace the static image with the Open Street Map iframe
container.innerHTML = iframeCode;
});
</script>